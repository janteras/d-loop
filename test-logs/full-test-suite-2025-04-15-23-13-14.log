D-Loop Protocol Full Test Suite
Started at: Tue Apr 15 23:13:14 BST 2025
=============================================
Contracts compiled successfully
Running Unit Tests
Test pattern: test/unit/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·

✓ Unit Tests PASSED
============================================
Running Integration Tests
Test pattern: test/integration/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·
==== DLOOP Protocol Integration Test Runner ====
Checking for existing Hardhat processes...
Killed process: 5358
Killed process: 5344
Found available port: 8545
Starting Hardhat node on port 8545...


  AssetDAO Governance Rewards Edge Case Tests
    Minimum Participation Edge Case
✓ Integration Tests PASSED
============================================
Running Validation Tests
Test pattern: test/validation/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·

✓ Validation Tests PASSED
============================================
Running Security Tests
Test pattern: test/security/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·
Starting Standalone GovernanceRewards Security Test
Starting Standalone Treasury Reentrancy Test


  AssetDAO Security Tests
    Access Control Security Tests
Test accounts:
- Owner: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
- Admin: 0x70997970C51812dc3A010C7d01b50e0d17dc79C8
- ProtocolDAO: 0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC
- Attacker: 0x90F79bf6EB2c4f870365E785982E1f101E93b906
- User: 0x15d34AAf54267DB7D7c367839AAf71A00a2C6A65

Deploying MockToken...
✓ Security Tests PASSED
============================================
Running Performance Tests
Test pattern: test/performance/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·

=== DLOOP Protocol Gas Profile Summary (OPTIMIZED VERSION) ===


=== Overall Summary ===

Critical Methods Coverage: 0/0 (100.0%)
Access Control Coverage: 0/0 (NaN%)
Privilege Escalation Risk: POTENTIAL CONCERN

=== Protocol Compliance ===

Critical Method Gas Delta: 3.2% vs. required 5% - [32mPASS[0m
Privilege Escalation Risk: POTENTIAL CONCERN vs. required LOW - [33mWARNING[0m
Access Control Coverage: NaN% vs. required 85% - [31mFAIL[0m

=========================================


=== DLOOP Protocol Gas Profile Summary ===


=== Overall Summary ===

Critical Methods Coverage: 0/0 (100.0%)
Access Control Coverage: 0/0 (NaN%)
Privilege Escalation Risk: POTENTIAL CONCERN

=== Protocol Compliance ===

Critical Method Gas Delta: 3.2% vs. required 5% - [32mPASS[0m
Privilege Escalation Risk: POTENTIAL CONCERN vs. required LOW - [33mWARNING[0m
Access Control Coverage: NaN% vs. required 85% - [31mFAIL[0m

=========================================

✓ Performance Tests PASSED
============================================
Running Deployment Tests
Test pattern: test/deployment/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·

✓ Deployment Tests PASSED
============================================
Running Privilege Escalation Tests
Test pattern: test/security/*Privilege*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·


  Privilege Escalation Security Tests
    SoulboundNFT Privilege Escalation
      1) should prevent non-admins from granting admin roles
      2) should prevent non-admins from granting minter roles
      3) should prevent non-minters from minting tokens
    AINodeRegistry Privilege Escalation
      4) should prevent non-admins from updating node state
      5) should prevent non-admins from updating node reputation
      6) should prevent non-owners from deactivating nodes
    Treasury Privilege Escalation
      7) should prevent non-admins from withdrawing funds
      8) should prevent unauthorized batch withdrawals
    ProtocolDAO Privilege Escalation
      9) should prevent non-admins from adding new admin roles
      10) should prevent non-admins from executing privileged actions


  0 passing (469ms)
  10 failing

  1) Privilege Escalation Security Tests
       SoulboundNFT Privilege Escalation
         should prevent non-admins from granting admin roles:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:58:49)

  2) Privilege Escalation Security Tests
       SoulboundNFT Privilege Escalation
         should prevent non-admins from granting minter roles:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:67:49)

  3) Privilege Escalation Security Tests
       SoulboundNFT Privilege Escalation
         should prevent non-minters from minting tokens:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:76:49)

  4) Privilege Escalation Security Tests
       AINodeRegistry Privilege Escalation
         should prevent non-admins from updating node state:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:87:52)

  5) Privilege Escalation Security Tests
       AINodeRegistry Privilege Escalation
         should prevent non-admins from updating node reputation:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:101:52)

  6) Privilege Escalation Security Tests
       AINodeRegistry Privilege Escalation
         should prevent non-owners from deactivating nodes:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:115:52)

  7) Privilege Escalation Security Tests
       Treasury Privilege Escalation
         should prevent non-admins from withdrawing funds:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:131:52)

  8) Privilege Escalation Security Tests
       Treasury Privilege Escalation
         should prevent unauthorized batch withdrawals:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:146:52)

  9) Privilege Escalation Security Tests
       ProtocolDAO Privilege Escalation
         should prevent non-admins from adding new admin roles:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:174:40)

  10) Privilege Escalation Security Tests
       ProtocolDAO Privilege Escalation
         should prevent non-admins from executing privileged actions:
     Error: incorrect number of arguments to constructor
      at ContractFactory.getDeployTransaction (node_modules/ethers/src.ts/contract/factory.ts:87:19)
      at ContractFactory.deploy (node_modules/ethers/src.ts/contract/factory.ts:105:31)
      at deployContractsFixture (test/security/PrivilegeEscalation.test.js:17:45)
      at loadFixture (node_modules/@nomicfoundation/hardhat-network-helpers/src/loadFixture.ts:59:18)
      at Context.<anonymous> (test/security/PrivilegeEscalation.test.js:186:33)



✓ Privilege Escalation Tests PASSED
============================================
Running Backward Compatibility Tests
Test pattern: test/backward-compatibility/**/*.test.js
----------------------------------------
 ·---------------------------|--------------------------------|--------------------------------·
 |  Solc version: 0.8.24     ·  Optimizer enabled: true       ·  Runs: 200                     │
 ····························|································|·································
 |  Contract Name            ·  Deployed size (KiB) (change)  ·  Initcode size (KiB) (change)  │
 ····························|································|·································
 |  AINodeGovernance         ·                 7.465 (0.000)  ·                 8.050 (0.000)  │
 ····························|································|·································
 |  AINodeRegistry           ·                12.830 (0.000)  ·                13.228 (0.000)  │
 ····························|································|·································
 |  AssetDAO                 ·                13.635 (0.000)  ·                14.485 (0.000)  │
 ····························|································|·································
 |  DAIToken                 ·                 3.425 (0.000)  ·                 4.200 (0.000)  │
 ····························|································|·································
 |  DLoopToken               ·                 6.282 (0.000)  ·                 8.117 (0.000)  │
 ····························|································|·································
 |  Errors                   ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  FeeCalculator            ·                 9.546 (0.000)  ·                10.475 (0.000)  │
 ····························|································|·································
 |  FeeProcessor             ·                11.668 (0.000)  ·                12.434 (0.000)  │
 ····························|································|·································
 |  GovernanceRewards        ·                 6.165 (0.000)  ·                 6.769 (0.000)  │
 ····························|································|·································
 |  PriceOracle              ·                 1.692 (0.000)  ·                 2.059 (0.000)  │
 ····························|································|·································
 |  PriceOracleAdapter       ·                 0.649 (0.000)  ·                 0.831 (0.000)  │
 ····························|································|·································
 |  ProtocolDAO              ·                 6.438 (0.000)  ·                 6.803 (0.000)  │
 ····························|································|·································
 |  SafeERC20                ·                 0.084 (0.000)  ·                 0.138 (0.000)  │
 ····························|································|·································
 |  SimplifiedAdminControls  ·                 5.480 (0.000)  ·                 6.035 (0.000)  │
 ····························|································|·································
 |  SoulboundNFT             ·                 7.546 (0.000)  ·                 7.982 (0.000)  │
 ····························|································|·································
 |  SoulboundNFTAdapter      ·                 2.241 (0.000)  ·                 2.423 (0.000)  │
 ····························|································|·································
 |  TokenApprovalOptimizer   ·                 3.464 (0.000)  ·                 4.004 (0.000)  │
 ····························|································|·································
 |  TokenOptimizer           ·                 0.935 (0.000)  ·                 0.966 (0.000)  │
 ····························|································|·································
 |  Treasury                 ·                12.328 (0.000)  ·                12.602 (0.000)  │
 ·---------------------------|--------------------------------|--------------------------------·

✓ Backward Compatibility Tests PASSED
============================================
=============================================
Test Suite Summary
Total test categories: 8
Passed: 8
Failed: 0
Ended at: Tue Apr 15 23:13:24 BST 2025
=============================================
All tests passed successfully!
